<?xml version="1.0"?><!--/** * Copyright Â© 2016 Magento. All rights reserved. * See COPYING.txt for license details. */--><config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:ObjectManager/etc/config.xsd">    <!-- Payment Method Facade configuration -->	<preference for="Magento\Customer\Model\AccountManagement" type="MyFatoorah\Myfatoorah\Model\Account\AccountManagement"/>	<preference for="MyFatoorah\Myfatoorah\Api\OrderManagementInterface" type="MyFatoorah\Myfatoorah\Model\OrderManagement"/>    <virtualType name="MyfatoorahFacade" type="Magento\Payment\Model\Method\Adapter">        <arguments>            <argument name="code" xsi:type="const">\MyFatoorah\Myfatoorah\Model\Ui\ConfigProvider::CODE</argument>            <argument name="formBlockType" xsi:type="string">Myfatoorah\Payment\Block\Form</argument>            <argument name="infoBlockType" xsi:type="string">MyFatoorah\Myfatoorah\Block\Info</argument>            <argument name="valueHandlerPool" xsi:type="object">MyfatoorahValueHandlerPool</argument>            <argument name="commandPool" xsi:type="object">MyfatoorahCommandPool</argument>        </arguments>    </virtualType>    <!-- Configuration reader -->    <virtualType name="MyfatoorahConfig" type="Magento\Payment\Gateway\Config\Config">        <arguments>            <argument name="methodCode" xsi:type="const">\MyFatoorah\Myfatoorah\Model\Ui\ConfigProvider::CODE</argument>        </arguments>    </virtualType>    <!-- Logger, initialized with MyfatoorahConfig -->    <virtualType name="MyfatoorahLogger" type="Magento\Payment\Model\Method\Logger">        <arguments>            <argument name="config" xsi:type="object">MyfatoorahConfig</argument>        </arguments>    </virtualType>    <type name="MyFatoorah\Myfatoorah\Gateway\Http\Client\ClientMock">        <arguments>            <argument name="logger" xsi:type="object">MyfatoorahLogger</argument>        </arguments>    </type>    <!-- Commands infrastructure -->    <virtualType name="MyfatoorahCommandPool" type="Magento\Payment\Gateway\Command\CommandPool">        <arguments>            <argument name="commands" xsi:type="array">                <item name="authorize" xsi:type="string">MyfatoorahAuthorizeCommand</item>                <item name="capture" xsi:type="string">MyfatoorahCaptureCommand</item>                <item name="void" xsi:type="string">MyfatoorahVoidCommand</item>            </argument>        </arguments>    </virtualType>    <!-- Authorize command -->    <virtualType name="MyfatoorahAuthorizeCommand" type="Magento\Payment\Gateway\Command\GatewayCommand">        <arguments>            <argument name="requestBuilder" xsi:type="object">MyfatoorahAuthorizationRequest</argument>            <argument name="handler" xsi:type="object">MyfatoorahResponseHandlerComposite</argument>            <argument name="transferFactory" xsi:type="object">MyFatoorah\Myfatoorah\Gateway\Http\TransferFactory</argument>            <argument name="client" xsi:type="object">MyFatoorah\Myfatoorah\Gateway\Http\Client\ClientMock</argument>        </arguments>    </virtualType>    <!-- Authorization Request -->    <virtualType name="MyfatoorahAuthorizationRequest" type="Magento\Payment\Gateway\Request\BuilderComposite">        <arguments>            <argument name="builders" xsi:type="array">                <item name="transaction" xsi:type="string">MyFatoorah\Myfatoorah\Gateway\Request\AuthorizationRequest</item>                <item name="mockData" xsi:type="string">MyFatoorah\Myfatoorah\Gateway\Request\MockDataRequest</item>            </argument>        </arguments>    </virtualType>    <type name="MyFatoorah\Myfatoorah\Gateway\Request\AuthorizationRequest">        <arguments>            <argument name="config" xsi:type="object">MyfatoorahConfig</argument>        </arguments>    </type>    <!-- Capture command -->    <virtualType name="MyfatoorahCaptureCommand" type="Magento\Payment\Gateway\Command\GatewayCommand">        <arguments>            <argument name="requestBuilder" xsi:type="object">MyFatoorah\Myfatoorah\Gateway\Request\CaptureRequest</argument>            <argument name="handler" xsi:type="object">MyFatoorah\Myfatoorah\Gateway\Response\TxnIdHandler</argument>            <argument name="transferFactory" xsi:type="object">MyFatoorah\Myfatoorah\Gateway\Http\TransferFactory</argument>            <argument name="validator" xsi:type="object">MyFatoorah\Myfatoorah\Gateway\Validator\ResponseCodeValidator</argument>            <argument name="client" xsi:type="object">MyFatoorah\Myfatoorah\Gateway\Http\Client\ClientMock</argument>        </arguments>    </virtualType>    <!-- Capture Request -->    <type name="MyFatoorah\Myfatoorah\Gateway\Request\CaptureRequest">        <arguments>            <argument name="config" xsi:type="object">MyfatoorahConfig</argument>        </arguments>    </type>    <!-- Void command -->    <virtualType name="MyfatoorahVoidCommand" type="Magento\Payment\Gateway\Command\GatewayCommand">        <arguments>            <argument name="requestBuilder" xsi:type="object">MyFatoorah\Myfatoorah\Gateway\Request\VoidRequest</argument>            <argument name="handler" xsi:type="object">MyFatoorah\Myfatoorah\Gateway\Response\TxnIdHandler</argument>            <argument name="transferFactory" xsi:type="object">MyFatoorah\Myfatoorah\Gateway\Http\TransferFactory</argument>            <argument name="validator" xsi:type="object">MyFatoorah\Myfatoorah\Gateway\Validator\ResponseCodeValidator</argument>            <argument name="client" xsi:type="object">MyFatoorah\Myfatoorah\Gateway\Http\Client\ClientMock</argument>        </arguments>    </virtualType>    <!-- Void Request -->    <type name="MyFatoorah\Myfatoorah\Gateway\Request\VoidRequest">        <arguments>            <argument name="config" xsi:type="object">MyfatoorahConfig</argument>        </arguments>    </type>    <!-- Response handlers -->    <virtualType name="MyfatoorahResponseHandlerComposite" type="Magento\Payment\Gateway\Response\HandlerChain">        <arguments>            <argument name="handlers" xsi:type="array">                <item name="txnid" xsi:type="string">MyFatoorah\Myfatoorah\Gateway\Response\TxnIdHandler</item>                <item name="fraud" xsi:type="string">MyFatoorah\Myfatoorah\Gateway\Response\FraudHandler</item>            </argument>        </arguments>    </virtualType>    <!-- Value handlers infrastructure -->    <virtualType name="MyfatoorahValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">        <arguments>            <argument name="handlers" xsi:type="array">                <item name="default" xsi:type="string">MyfatoorahConfigValueHandler</item>            </argument>        </arguments>    </virtualType>    <virtualType name="MyfatoorahConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">        <arguments>            <argument name="configInterface" xsi:type="object">MyfatoorahConfig</argument>        </arguments>    </virtualType>    <type name="MyFatoorah\Myfatoorah\Block\Info">        <arguments>            <argument name="config" xsi:type="object">MyfatoorahConfig</argument>        </arguments>    </type></config>